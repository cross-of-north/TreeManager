<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Tree manager</title>
    <link rel="stylesheet" type="text/css" href="/static/styles.css" />
    <script src="/static/jquery.js"></script>
    <script src="/static/tree_data.js"></script>
    <script src="/static/tree_view.js"></script>
  </head>
<body>
dfsdfasdf
<div id="treeView"></div>
<script>
    async function start() {
        let rootNode = await TreeData.addNode("");
        let level1Node1 = await TreeData.addNode(rootNode);
        let level1Node2 = await TreeData.addNode(rootNode);
        let level1Node3 = await TreeData.addNode(rootNode);
        let level2Node2 = await TreeData.addNode(TreeData.getNodeId(level1Node2));
    }
    start().then(()=>{
        TreeView.render( "treeView", TreeData );
    })

    function internalGenerator() {
        return new Promise((resolve)=>setTimeout( resolve, 1000 ));
    }

    async function* externalGenerator() {
        for( let i = 0; i < 5; i++ ) {
            await internalGenerator();
            yield i;
        }
    }

    async function run_gen() {
        let gen = externalGenerator();
        let next;
        do {
            next = await gen.next();
            console.log(next.value);
        } while ( next && !next.done );
    }

    run_gen().then();


</script>
</body>